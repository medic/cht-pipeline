version: 2

sources:
  - name: couchdb
    database: "{{ env_var('POSTGRES_DB') }}"
    schema: "{{ env_var('POSTGRES_SCHEMA') }}"
    tables:
      - name: "{{ env_var('POSTGRES_TABLE') }}"
models:
  - name: document_metadata
    config:
      contract:
        enforced: true
    columns:
      - name: uuid
        data_type: text
        constraints:
          - type: unique
        data-tests:
          - not_null
          - unique
      - name: saved_timestamp
        data_type: timestamp
        data-tests:
          - not_null
      - name: _deleted
        data_type: boolean
        data-tests:
          - not_null
          - accepted_values:
              values: [true, false]
      - name: doc_type
        data_type: text
        data-tests:
          - not_null
