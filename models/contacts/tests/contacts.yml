unit_tests:
  - name: test_contact_model_transformation_and_data_integrity
    description: |
      This unit test validates the transformation logic in the `contact` model and ensures data integrity.
      It uses fixture data for both `document_metadata` and `source_table` to test the complete logic.
    model: contact
    overrides:
      macros:
        is_incremental: false
    given:
      - input: ref('document_metadata')
        format: csv
        fixture: contact_document_metadata_initial
      - input: source('couchdb', "{{ env_var('POSTGRES_TABLE') }}")
        format: csv
        fixture: contact_source_table_initial
    expect:
      format: csv
      fixture: contact_initial_expected
  - name: test_person_model_transformation_and_data_integrity
    description: |
      This unit test validates the transformation logic in the `person` model and ensures data integrity.
      It uses fixture data for `contact` and `couchdb` to test the complete logic.
    model: person
    overrides:
      macros:
        is_incremental: false
    given:
      - input: ref('contact')
        format: csv
        fixture: person_contact_initial
      - input: source('couchdb', "{{ env_var('POSTGRES_TABLE') }}")
        format: csv
        fixture: person_source_table_initial
    expect:
      format: csv
      fixture: person_initial_expected
  - name: test_place_model_transformation_and_data_integrity
    description: |
      This unit test validates the transformation logic in the `place` model and ensures data integrity.
      It uses fixture data for both `contact` and `couchdb` to test the complete logic.
    model: place
    overrides:
      macros:
        is_incremental: false
    given:
      - input: ref('contact')
        format: csv
        fixture: place_contact_initial
      - input: source('couchdb', "{{ env_var('POSTGRES_TABLE') }}")
        format: csv
        fixture: place_source_table_initial
    expect:
      format: csv
      fixture: place_initial_expected
